# ê³¼ì œ. íŠ¸ë¦¬í”Œ ì—¬í–‰ì í´ëŸ½ ë§ˆì¼ë¦¬ì§€ ì„œë¹„ìŠ¤

## ì—¬í–‰ìì˜ ì¥ì†Œ ë¦¬ë·°ì‹œ í¬ì¸íŠ¸ë¥¼ ë¶€ì—¬ ë° íˆìŠ¤í† ë¦¬ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤

## Swagger ì£¼ì†Œ
http://localhost:8080/swagger-ui/index.html

## ìš”êµ¬ì‚¬í•­

<details>
<summary>ìš”êµ¬ ì‚¬í•­</summary>
<div markdown="1">

âœ… í•œ ì‚¬ìš©ìëŠ” ì¥ì†Œë§ˆë‹¤ ë¦¬ë·°ë¥¼ 1ê°œë§Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

âœ… ë¦¬ë·°ëŠ” ìˆ˜ì • ë° ì‚­ì œí•  ìˆ˜ ìˆë‹¤.

âœ… ë¦¬ë·° ì‘ì„± ë³´ìƒ ì ìˆ˜
```text
* ë‚´ìš© ì ìˆ˜   
    - 1ì ì´ìƒ í…ìŠ¤íŠ¸ ì‘ì„±: 1ì    
    - 1ì¥ ì´ìƒ ì‚¬ì§„ ì²¨ë¶€: 1ì    

* ë³´ë„ˆìŠ¤ ì ìˆ˜   
    - íŠ¹ì • ì¥ì†Œì— ì²« ë¦¬ë·° ì‘ì„±: 1ì    
```
âœ… í¬ì¸íŠ¸ ì¦ê°ì´ ìˆì„ ë•Œë§ˆë‹¤ ì´ë ¥ì´ ë‚¨ì•„ì•¼ í•œë‹¤.

âœ… ë¦¬ë·° ì‘ì„±í–ˆë‹¤ê°€ ì‚­ì œì‹œ í•´ë‹¹ ë¦¬ë·°ë¡œ ë¶€ì—¬í•œ ë‚´ìš© ì ìˆ˜ì™€ ë³´ë„ˆìŠ¤ ì ìˆ˜ íšŒìˆ˜í•©ë‹ˆë‹¤.

âœ… ë¦¬ë·°ë¥¼ ìˆ˜ì •í•˜ë©´ ìˆ˜ì •í•œ ë‚´ìš©ì— ë§ëŠ” ë‚´ìš© ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ì—¬ ì ìˆ˜ë¥¼ ë¶€ì—¬í•˜ê±°ë‚˜ íšŒìˆ˜í•©ë‹ˆë‹¤.

    * ê¸€ë§Œ ì‘ì„±í•œ ë¦¬ë·°ì— ì‚¬ì§„ì„ ì¶”ê°€í•˜ë©´ 1ì ì„ ë¶€ì—¬í•©ë‹ˆë‹¤.
    * ê¸€ê³¼ ì‚¬ì§„ì´ ìˆëŠ” ë¦¬ë·°ì—ì„œ ì‚¬ì§„ì„ ëª¨ë‘ ì‚­ì œí•˜ë©´ 1ì ì„ íšŒìˆ˜í•©ë‹ˆë‹¤.

âœ… ì‚¬ìš©ì ì…ì¥ì—ì„œ ë³¸ ì²« ë¦¬ë·°ì¼ ë•Œ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.

    * ì–´ë–¤ ì¥ì†Œì— ì‚¬ìš©ì Aê°€ ë¦¬ë·°ë¥¼ ë‚¨ê²¼ë‹¤ê°€ ì‚­ì œí•˜ê³  ì‚­ì œëœ ì´í›„ ì‚¬ìš©ì Bê°€ ë¦¬ë·°ë¥¼ ë‚¨ê¸°ë©´ ì‚¬ìš©ì Bì—ê²Œ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.
    * ì–´ë–¤ ì¥ì†Œì— ì‚¬ìš©ì Aê°€ ë¦¬ë·°ë¥¼ ë‚¨ê²¼ë‹¤ê°€ ì‚­ì œí•˜ëŠ”ë° ì‚­ì œë˜ê¸° ì´ì „ ì‚¬ìš©ì Bê°€ ë¦¬ë·°ë¥¼ ë‚¨ê¸°ë©´ ì‚¬ìš©ì Bì—ê²Œ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¥¼ ë¶€ì—¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

âœ… í¬ì¸íŠ¸ ë¶€ì—¬ API êµ¬í˜„ì— í•„ìš”í•œ SQL ìˆ˜í–‰ ì‹œ ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ì¸ë±ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.    

</div>
</details>

## ê°œë°œí™˜ê²½(Dependency)
- Java 8+
- Spring Boot 2.7.1
- Spring Web MVC
- Spring Validation
- Spring Data JPA
- Swagger
- h2
- Mysql 8.0.29
- Docker
- Gradle

## í”„ë¡œì íŠ¸ íŒ¨í‚¤ì§€ êµ¬ì¡°
íŒ¨í‚¤ì§€ êµ¬ì¡°ëŠ” ì „ì²´ì ìœ¼ë¡œ ì‰½ê²Œ íŒŒì•…í•˜ê¸° ìœ„í•´ ê°™ì€ layer ë¼ë¦¬ ë¬¶ì–´ ê³„ì¸µí˜• êµ¬ì¡°ë¡œ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
```bash
ğŸ“¦java
 â”— ğŸ“‚com
 â”ƒ â”— ğŸ“‚triple
 â”ƒ â”ƒ â”— ğŸ“‚triplehomework
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚common
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚config
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚controller
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚dto
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚entity
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚exception
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚handler
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚repository
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚service
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚swagger
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œApp.java
```
## í”„ë¡œì íŠ¸ ì‹¤í–‰

### - ë„ì»¤ ì„¤ì¹˜
- [Window](https://docs.docker.com/desktop/windows/install/)

- [Mac](https://docs.docker.com/desktop/mac/install/) ë˜ëŠ” í™ˆë¸Œë£¨ ì‚¬ìš©ì‹œ brew install --cask docker
### - DB
<details>
<summary>DB</summary>
<div markdown="1">

```
1. docker run -d --name triple-mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=1 -e MYSQL_DATABASE=triple mysql --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
2. docker exec -it triple-mysql bash
3. mysql -u root -p
4. 1

5. create user triple@'%' identified by 'pass';

6. grant all privileges on *.* to 'triple';

7. flush privileges;

8. DB íˆ´ì„ ì´ìš©í•˜ì—¬ í•´ë‹¹ ìœ ì €ë¡œ ì ‘ì†
  - User: triple
  - Password: pass
  - Database: triple
9. DDL.sql, data.sql ì†ŒìŠ¤ ì‹¤í–‰
```

</div>
</details>

### - ì• í”Œë¦¬ì¼€ì´ì…˜

<details>
<summary>ì• í”Œë¦¬ì¼€ì´ì…˜</summary>
<div markdown="1">

```
git clone https://github.com/jongwoo-Lim/triple-homework.git
cd triple-homework

./gradlew clean build ë˜ëŠ” ./gradlew clean build -x test (í…ŒìŠ¤íŠ¸ ìŠ¤í‚µ)
cd ./build/libs/

H2 ì¸ë©”ëª¨ë¦¬ DB ì‚¬ìš©
  java -jar -Dspring.profiles.active=test triple-homework-0.0.1-SNAPSHOT.jar 
MySql DB ì‚¬ìš©
  java -jar triple-homework-0.0.1-SNAPSHOT.jar 
```

</div>
</details>


## API

- ë¦¬ë·° ìˆ˜ì •/ì‚­ì œì‹œ ë“±ë¡ëœ ë¦¬ë·° ì•„ì´ë””ë¥¼ í†µí•´ ìš”ì²­í•´ ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.
- ë¦¬ë·° ì‚­ì œì‹œ removePhotoYn í•„ë“œë¥¼ ì¶”ê°€í•˜ì˜€ìœ¼ë©° "Y"ì¼ ê²½ìš° ìš”ì²­ í•„ë“œì˜ ì²¨ë¶€íŒŒì¼ë§Œ ì‚­ì œ ë˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

|Method|Path|Body|Description|
|------|---|-----------|----------|
|POST|/events| {<br/>"type": "REVIEW",<br/>"action": "ADD", <br/>"reviewId": "",<br/>"content": "ì¢‹ì•„ìš”!",<br/>"attachedPhotoIds": ["e4d1a64e-a531-46de-88d0-ff0ed70c0bb8", "afb0cef2-851d-4a50-bb07-9cc15cbdc332"],<br/>"userId": "3ede0ef2-92b7-4817-a5f3-0c575361f745",<br/>"placeId": "2e4baf1c-5acb-4efb-a1af-eddada31b00f"<br/>} |ë¦¬ë·° ì¶”ê°€|
|POST|/events| {<br/>"type": "REVIEW",<br/>"action": "MOD", <br/>"reviewId": "240a0658-dc5f-4878-9381-ebb7b2667772",<br/>"content": "ë„ˆë¬´ ì¢‹ì•„ìš”!!!",<br/>"attachedPhotoIds": ["e4d1a64e-a531-46de-88d0-ff0ed70c0bb8", "afb0cef2-851d-4a50-bb07-9cc15cbdc332"],<br/>"userId": "3ede0ef2-92b7-4817-a5f3-0c575361f745",<br/>"placeId": "2e4baf1c-5acb-4efb-a1af-eddada31b00f"<br/>} |ë¦¬ë·° ë‚´ìš© ìˆ˜ì • ë°<br/>ì²¨ë¶€íŒŒì¼ ì¶”ê°€|
|POST|/events| {<br/>"type": "REVIEW",<br/>"action": "DELETE, <br/>"reviewId": "240a0658-dc5f-4878-9381-ebb7b2667772",<br/>"content": "",<br/>"attachedPhotoIds": ["e4d1a64e-a531-46de-88d0-ff0ed70c0bb8", "afb0cef2-851d-4a50-bb07-9cc15cbdc332"],<br/>"userId": "3ede0ef2-92b7-4817-a5f3-0c575361f745",<br/>"placeId": "2e4baf1c-5acb-4efb-a1af-eddada31b00f",<br/> "removePhotoYn" : "N" <br/>} |ë¦¬ë·° ì‚­ì œ<br/> ë˜ëŠ” <br/> ì²¨ë¶€íŒŒì¼ ì‚­ì œ|
|GET|/member/{userId}/point| |íšŒì› í¬ì¸íŠ¸ <br/>ì¡°íšŒ

## í…ŒìŠ¤íŠ¸ìš© ë°ì´í„°

### íšŒì›
|mno|user_id|
|------|------------------------------------|
|999994|ef540baf-d99e-4e99-97ab-179099e1c1e7|
|999995|0615af95-20bc-4054-9b60-8dba9928c22f|
|999996|4f2c6c16-0231-4d8e-9bc2-1f64f6e671dd|
|999997|98abfce5-6540-41a4-9c89-0ffa06c6e05f|
|999998|45b29c7a-afa6-4c81-af8d-d8f3b10121a0|
|999999|3ede0ef2-92b7-4817-a5f3-0c575361f745|

### ì¥ì†Œ
|place_id|mno|
|-----------------------------------|-------|
|11ecfb56-c15a-1c46-8b49-4113d19dad89|999999|
|11ecfb56-c168-2607-8b49-dfe4239c2faf|999999|
|11ecfb56-c172-d468-8b49-d5df7fd01594|999999|
|11ecfb56-c179-8b29-8b49-831f4e169e79|999999|
|11ecfb56-c181-ef9a-8b49-712075a48633|999999|
|2e4baf1c-5acb-4efb-a1af-eddada31b00f|999999|



## ERD

### ë…¼ë¦¬ëª…
![ë…¼ë¦¬ëª…](./ERD_logical.PNG)
### ë¬¼ë¦¬ëª…
![ë¬¼ë¦¬ëª…](./ERD_physical.PNG)
